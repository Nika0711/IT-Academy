<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" scr="formvalid.js"> </script>
    <title>Form Validation</title>
</head>
<body>
    <!-- novalidate - отменяет html5 валидацию -->
    <form id='INFO' name='site' method=post action='https://fe.it-academy.by/TestForm.php' novalidate>
        Разработчики: <input id='developers' class="longtext input" type=text name='developers'>  <span id="dev-error" class="error"></span><br /><br />
        Название сайта: <input  id='site' class="longtext input" type=text  name='sitename'><span id="ERROR"></span><br /><br />
        URL сайта: <input  id='URL'  class="averagetext input"  type=text name='url' ><span id="ERROR"></span><br /><br />
        Дата запуска сайта: <input  id='DATE' class="shorttext input" type=date name='launchdate'><span id="ERROR"></span><br /><br />
        Посетителей в сутки: <input  id='VISITORS' class="shorttext input" type=number name='visitors'><span id="ERROR"></span><br /><br />
        E-mail для связи: <input  id='EMAIL'  class="midtext input" type=text name='email'><span id="ERROR"></span><br /><br />
        Рубрика каталога:
        <select  id='CATALOG' class="midtext" name='catalog'>
            <option value=1>бытовая техника</option>
            <option value=2>здоровье</option>
            <option value=3>домашний уют</option>
        </select><span id="ERROR"></span><br /><br /> 
        Размещение:
            <input type=radio  id='PAY' name='payment' value=1>бесплатное
            <input type=radio name='payment' value=2>платное
            <input type=radio name='payment' value=3>VIP <br> <br> <span id="pay-error"></span>
        Разрешить отзывы: <input type=checkbox  id='AGREE' name='agree'><span id="ERROR"></span><br /><br />
        Описание сайта:<br>
        <input  id='DESCR' class="descr input"  type=text name='desciption'><span id="ERROR"></span><br /> <br />   
        <input  id='SUBMIT' type='submit' value='Зарегистрироваться'>
    </form>

<script>
"use strict"
var formTag=document.getElementById('INFO');
var formInputs=document.querySelectorAll('input');


var e=document.getElementById('dev-error');

// Функция валидации поля "Разработчики"

 // autoFocus - авто-фокусировать ли поле, ЕСЛИ в нём будет найдена ошибка

 function validDevelop(autoFocus){
      
    var formTag=document.getElementById('INFO'); //находим форму
    var devField=document.getElementById('developers'); //находим поле "Разработчики"
    var devValue=devField.value;  //достаем значение поля
    
    var e=document.getElementById('dev-error'); // - это span для ошибок возле поля разработчиков

    var errorCount=0;

      if(devValue === ""){
          e.innerHTML='Поле обязательно должно быть заполнено!';
          errorCount++;
      } else {
          e.innerHTML= ''; // если ошибок не найдено - надо стереть старую ошибку, вдруг была
        }

    if ( devValue.length>30 ) {
        e.innerHTML='Введено более 30 символов!';
        errorCount++;
        } else {
        e.innerHTML= '';
        }

    if (errorCount && autoFocus)
        devField.focus(); // фокусируем поле, если разрешено и есть ошибки   
        
        return errorCount;// функция возвращает количество найденных ошибок
    }

      document.forms.INFO.developers.onblur=function(){validDevelop(false);}
    
      // у функции один формальный аргумент - autoFocus (я полагаю, я ещё не видел код)
    // мы, вызывая функцию, передаём ей фактический аргумент false
    // во время работы функции переменная autoFocus будет равна false  


    //   var devField=document.getElementById('DEVELOPERS')
    //   devField.addEventListener('blur', ()=>validDevelop(false));

  
// Функция валидации поля "Имя сайта"

    // По нажатию submit нужно вызвать все функции валидации полей:
    
    function validAll(EO) {
    EO=EO||window.event;

    try {
        var totalErrorCount=0;
        totalErrorCount+=validDevelop( !totalErrorCount ); // автофокус разрешаем только если ошибок пока нет ни одной, т.е. только для самого первого ошибочного поля
        totalErrCount+=validSiteName( !totalErrCount );
     
        if ( totalErrorCount )
            EO.preventDefault(); // если ошибки были - отменяем отправку формы на сервер
    }
    catch (err) {
        EO.preventDefault(); // что-то пошло не так - отменяем отправку формы на сервер
    }
}

document.forms.INFO.addEventListener('submit',validAll,false);

    






















</script>







    
</body>
</html>